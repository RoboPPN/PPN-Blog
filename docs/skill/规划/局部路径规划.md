---
sidebar_position: 1
---


根据附近的障碍物进行躲避路线规划。本地的实时规划是利用base_local_planner包实现的。

## 局部规划算法

### dwa_local_planner算法

DWA算法全称为：Dynamic Window Approach，中文为动态窗口法，其原理主要是在速度空间（v,w）中采样多组速度，并模拟这些速度在一定时间内的运动轨迹，再通过一个评价函数对这些轨迹打分，最优的速度被选择出来发送给下位机。

动态窗口的意思是根据移动机器人的加减速性能限定速度采样空间在一个可行的动态范围呢。

DWA算法基本思路如下:

1. 在机器人控制空间进行速度离散采样(dx,dy,dtheta)；

2. 对每一个采样速度执行前向模拟，看看使用该采样速度移动一小段段时间后会发生什么；

3. 评价前向模拟中每个轨迹，评价准则如: 靠近障碍物，靠近目标，贴近全局路径和速度；丢弃非法轨迹（如哪些靠近障碍物的轨迹）；

4. 挑出得分最高的轨迹并发送相应速度给移动底座；

5. 重复上面步骤；

### teb_local_planner（本质是插件）

teb_local_planner是2D导航堆栈的base_local_planner的插件。实现了一个在线优化的本地轨迹规划器，用于导航和控制移动机器人，作为ROS 导航包的插件。全局规划器生成的初始轨迹在运行时期间进行优化，最小化轨迹执行时间（时间最优目标）， 与障碍物分离并符合动力学约束，例如满足最大速度和加速度。当前的实施符合非完整机器人（差动驱动和类似汽车的机器人）的运动学。

通过求解稀疏的标量化多目标优化问题，可以有效地获得最优轨迹。用户可以为优化问题提供权重，以便在目标冲突的情况下指定行为。

### 两种算法对比

dwa_local_planner算法前瞻更短，小车基本会保持运行在全局路径左右，而teb_local_planner算法前瞻相对较长在遇到障碍时，局部路径会自动规划避过障碍物，但是如果小车处在比较复杂的环境下，局部路径会比较容易出现混乱的现象。
